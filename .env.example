# StudySpark 環境変数テンプレート
# このファイルを .env.local にコピーして実際の値を設定してください

# =============================================================================
# Supabase 設定
# =============================================================================

# 本番環境 (zlipaeanhcslhintxpej.supabase.co)
NEXT_PUBLIC_SUPABASE_URL=https://zlipaeanhcslhintxpej.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# 開発環境 (新規プロジェクト作成後に追加)
# NEXT_PUBLIC_SUPABASE_URL_DEV=https://your-dev-project.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY_DEV=your_dev_anon_key_here
# SUPABASE_SERVICE_ROLE_KEY_DEV=your_dev_service_role_key_here

# Supabase Local (Docker) - supabase start 実行後に自動生成される値
# NEXT_PUBLIC_SUPABASE_URL_LOCAL=http://localhost:54321
# NEXT_PUBLIC_SUPABASE_ANON_KEY_LOCAL=your_local_anon_key_here
# SUPABASE_SERVICE_ROLE_KEY_LOCAL=your_local_service_role_key_here

# =============================================================================
# OpenAI / ChatGPT API 設定
# =============================================================================

# OpenAI API Key (sk-proj- で始まるキー)
OPENAI_API_KEY=your_openai_api_key_here

# OpenAI Organization ID (任意: 複数組織に属する場合のみ)
# OPENAI_ORGANIZATION_ID=org-xxxxx

# モデル名 (gpt-4o-mini 推奨)
OPENAI_MODEL=gpt-4o-mini

# API タイムアウト (ミリ秒, デフォルト: 30000 = 30秒)
OPENAI_TIMEOUT=30000

# API リクエスト最大リトライ回数 (デフォルト: 2)
OPENAI_MAX_RETRIES=2

# =============================================================================
# Langfuse (LLM Observability)
# =============================================================================

# Langfuse Public Key (pk-lf- で始まるキー)
LANGFUSE_PUBLIC_KEY=your_langfuse_public_key_here

# Langfuse Secret Key (sk-lf- で始まるキー)
LANGFUSE_SECRET_KEY=your_langfuse_secret_key_here

# Langfuse Host (クラウド版の場合)
LANGFUSE_HOST=https://cloud.langfuse.com

# Langfuse 有効化フラグ (クライアント側で参照)
NEXT_PUBLIC_LANGFUSE_ENABLED=true

# Cron Secret (バッチジョブ認証用、ランダム文字列を生成)
# 生成方法: openssl rand -base64 32
CRON_SECRET=your_random_cron_secret_here

# Slack Webhook URL (監視通知用、オプション)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# =============================================================================
# Sentry (エラートラッキング)
# =============================================================================

# Sentry DSN (プロジェクト作成後に取得)
# NEXT_PUBLIC_SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id

# Sentry 環境名 (development / production)
# SENTRY_ENVIRONMENT=development

# Sentry リリースバージョン (package.json の version を推奨)
# SENTRY_RELEASE=1.0.0

# =============================================================================
# Vercel Analytics (パフォーマンス監視)
# =============================================================================

# Vercel Analytics は Vercel デプロイ時に自動設定されます
# ローカル開発では不要

# =============================================================================
# Next.js 設定
# =============================================================================

# アプリケーションURL (本番環境)
# NEXT_PUBLIC_APP_URL=https://your-app.vercel.app

# 環境識別子 (development / staging / production)
NODE_ENV=development

# =============================================================================
# 機能フラグ (オプション)
# =============================================================================

# メール確認必須化 (本番: true, 開発: false)
NEXT_PUBLIC_EMAIL_CONFIRMATION_REQUIRED=false

# AI 機能有効化 (開発中は false で ChatGPT API を無効化可能)
NEXT_PUBLIC_AI_ENABLED=true

# デバッグモード (詳細ログ出力)
NEXT_PUBLIC_DEBUG_MODE=false

# =============================================================================
# タイムゾーン・ロケール
# =============================================================================

# タイムゾーン (Asia/Tokyo 固定)
TZ=Asia/Tokyo

# ロケール (ja-JP 固定)
NEXT_PUBLIC_LOCALE=ja-JP

# =============================================================================
# データ保持期間 (日数)
# =============================================================================

# 通知データ保持期間 (既読のみ自動削除, デフォルト: 90日)
NOTIFICATION_RETENTION_DAYS=90

# 監査ログ保持期間 (デフォルト: 1095日 = 3年)
AUDIT_LOG_RETENTION_DAYS=1095

# =============================================================================
# レート制限 (オプション)
# =============================================================================

# ChatGPT API レート制限 (1分あたりのリクエスト数)
# 無料Tier: 3 RPM, Tier 1: 500 RPM
OPENAI_RATE_LIMIT_RPM=3

# ChatGPT API トークン制限 (1分あたりのトークン数)
# 無料Tier: 20000 TPM, Tier 1: 200000 TPM
OPENAI_RATE_LIMIT_TPM=20000

# =============================================================================
# セキュリティ設定
# =============================================================================

# CORS 許可オリジン (カンマ区切り)
# CORS_ALLOWED_ORIGINS=https://your-app.vercel.app,http://localhost:3000

# セッションタイムアウト (秒, デフォルト: Supabase 標準の 1時間)
# SESSION_TIMEOUT=3600

# =============================================================================
# 開発用設定
# =============================================================================

# Supabase Studio URL (ローカル開発時)
# SUPABASE_STUDIO_URL=http://localhost:54323

# ログレベル (error / warn / info / debug)
LOG_LEVEL=info

# =============================================================================
# 注意事項
# =============================================================================
# 1. このファイル (.env.example) は Git にコミットします
# 2. 実際の値は .env.local に記載し、Git にコミットしないでください
# 3. .env.local は .gitignore に追加済みです
# 4. 本番環境では Vercel の環境変数設定を使用してください
# 5. 秘密情報 (API Key, Service Role Key) は絶対に公開しないでください
