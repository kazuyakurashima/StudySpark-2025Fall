# バックログ - 将来対応タスク

**作成日:** 2025年10月4日
**目的:** エラーなく稼働することを最優先するため、初期実装では省略し、Phase 0-5完了後に対応するタスク

---

## 📋 Phase 1 関連の詳細化タスク

### P1-2-detail: 生徒ダッシュボード詳細UIロジック
**優先度:** 中
**対応時期:** Phase 1完了後

- [ ] ヘッダーのあいさつ条件分岐実装
  - はじめまして（初回ログイン）
  - おかえりなさい（前回ログイン24時間以内）
  - お久しぶり（前回ログイン24時間以上）
  - 連続学習日数表示

- [ ] 今日のミッション完了パネル実装
  - 全ミッション完了時の「今日のミッション完了!」表示
  - 達成感演出のUI

- [ ] 今日のミッション特別モード実装（土曜日12時以降）
  - リフレクト促進カード表示
  - 正答率80%未満の2科目表示ロジック
  - 「振り返る」ボタンの遷移処理

- [ ] 学習カレンダー月移動機能
  - 月移動ボタン（上下ボタン）
  - スムーズな前後ページ遷移

- [ ] 直近の応援履歴「全表示/一部表示」切り替え
  - 「全表示」「一部表示」ボタン
  - デフォルト非表示項目の切り替えロジック
  - カードごとの「クリックして詳細を表示/閉じる」ボタン

### P1-4-detail: データロジックの詳細化
**優先度:** 高
**対応時期:** Phase 1完了直後

- [ ] 週次集計の境界値処理（Asia/Tokyo基準）
  - 月曜0:00の厳密な判定ロジック
  - タイムゾーン変換の統一処理

- [ ] カレンダー色分けロジックの優先順位
  - 判定基準1（入力数）vs 判定基準2（正答率）の優先ロジック明確化

- [ ] 習得率の境界値処理
  - 50%, 80% の境界値が含まれるか否か（>= or >）

### P1-1-detail: スパーク機能詳細化
**優先度:** 中
**対応時期:** Phase 1完了後

- [ ] 再入力時のデフォルト値引き継ぎ
  - 1回目入力内容の表示ロジック
  - 横バーと数値入力のデフォルト値設定

---

## 📋 Phase 2 関連の詳細化タスク

### P2-4: 未入力生徒管理機能（新規タスク）
**優先度:** 中
**対応時期:** Phase 2完了後

- [ ] 指導者ホーム「未入力生徒一覧」実装
  - 警告条件（1週間以上未入力）のロジック
  - しきい値選択機能（7日/5日/3日）のUI
  - Asia/Tokyo基準での未入力日数計算

- [ ] 対応ボタン・対応メモ機能実装
  - メモ入力フォーム（最大300字）
  - 記入日時・記入者・アバター保存
  - 他の指導者による追記機能
  - グレーアウト表示

### P2-5: AI品質基準策定（新規タスク）
**優先度:** 高
**対応時期:** Phase 2開始前

- [ ] セルフコンパッション原則の統一ドキュメント作成
- [ ] 成長マインドセット原則の統一ドキュメント作成
- [ ] GROWモデル準拠チェックリスト作成
- [ ] SMARTチェックリスト作成
- [ ] AI応答品質のテストケース作成

### P2-2-detail: 保護者応援機能のフィルター・ソート
**優先度:** 中
**対応時期:** Phase 2完了後

- [ ] 応援の有無フィルター（未応援/応援済み/全表示）
- [ ] 科目フィルター
- [ ] 期間フィルター（1ヶ月の間に記録が5件未満のときには全ての期間表示）
- [ ] 並び替え（記録日時/学習回/正答率）

### P2-3-detail: 指導者応援機能の保護者タブ
**優先度:** 中
**対応時期:** Phase 2完了後

- [ ] 保護者の応援履歴を表示するタブ実装
- [ ] 保護者別フィルター機能
- [ ] 期間フィルター機能

---

## 📋 Phase 3 関連の詳細化タスク

### P3-1-detail: ゴールナビ詳細機能
**優先度:** 中
**対応時期:** Phase 3完了後

- [ ] 「今回の思い」の編集履歴管理
  - 編集履歴保持（最大5件）
  - 編集日時記録
  - 自動保存（5秒後）

- [ ] エラーハンドリング実装
  - 未入力エラーメッセージ
  - 通信エラー時のローカル保存 → 自動再送
  - AI生成失敗時の再生成ボタン
  - 権限エラー時の閲覧モード切替

### P3-2-detail: リフレクト詳細機能
**優先度:** 中
**対応時期:** Phase 3完了後

- [ ] 特別感の演出実装
  - 「土曜日限定」ラベル表示
  - ボタンの光るアニメーション
  - 完了時の達成音
  - 振り返り完了バッジ

- [ ] セルフコンパッション応答マトリクス実装
  - 「全然ダメだった」への応答
  - 「友達はもっとできてる」への応答
  - 「やる気が出ない」への応答

### P3-3-detail: 達成マップ・履歴表示の詳細機能
**優先度:** 中
**対応時期:** Phase 3完了後

- [ ] コース別表示制御ロジック実装
  - Aコース: Spark（楽しくスタート）
  - Bコース: Flame（成長ステップ）
  - C/Sコース: Blaze（最高にチャレンジ）

- [ ] 学習履歴フィルター条件実装
  - 期間フィルターで「1ヶ月の間に記録が5件未満のときには全ての期間表示」ロジック

- [ ] 応援履歴フィルター機能実装
  - 科目フィルター
  - 期間フィルター
  - 並び替え（記録日時/学習回/正答率）
  - 表示（全表示/一部表示）

---

## 📋 Phase 4 関連の詳細化タスク

### P4-2-detail: 週次AI分析の共通分析軸・固有分析軸
**優先度:** 中
**対応時期:** Phase 4完了後

- [ ] 共通分析軸の実装
  - 学年別分析（小学5年/6年）
  - 生徒別分析
  - 科目別分析
  - 前週比較

- [ ] 項目別固有の分析軸実装
  - 応援履歴: 応援者別/応援種類別/応援量/効果測定
  - コーチング履歴: Will品質分析（SMART度）/達成率/行動変容

- [ ] 履歴閲覧機能実装
  - 過去の分析結果を選択して閲覧可能な機能
  - 時系列での変化確認機能

---

## 📋 共通タスク

### 共通-UI: 共通UIコンポーネントの再利用性改善
**優先度:** 高
**対応時期:** Phase 1開始時

- [ ] `components/shared/LearningCalendar.tsx` 実装
  - 生徒・保護者・指導者で共通利用
  - 月移動機能
  - 色分けロジック

- [ ] `components/shared/ProgressBar.tsx` 実装
  - 生徒・保護者で共通利用
  - 4科目別進捗バー

- [ ] `components/shared/EncouragementCard.tsx` 実装
  - 生徒・保護者・指導者で共通利用
  - 応援メッセージ表示

### 共通-通知: 通知機能の詳細実装
**優先度:** 低
**対応時期:** Phase 5完了後

- [ ] 新規応援メッセージ受信時の通知
- [ ] リフレクト期間（土曜12:00〜）の通知
- [ ] テスト直前の通知

---

## 🎯 優先順位サマリー

### 高優先度（Phase 0-1完了直後に対応）
1. **P1-4-detail: データロジックの詳細化** - エラーなく稼働するために必須
2. **P2-5: AI品質基準策定** - Phase 2開始前に必要
3. **共通-UI: 共通UIコンポーネント** - 再利用性向上のためPhase 1開始時に実装

### 中優先度（各Phase完了後に対応）
- P1-2-detail: 生徒ダッシュボード詳細UIロジック
- P1-1-detail: スパーク機能詳細化
- P2-4: 未入力生徒管理機能
- P2-2-detail, P2-3-detail: フィルター・ソート機能
- P3-1-detail, P3-2-detail, P3-3-detail: ゴールナビ・リフレクト詳細機能
- P4-2-detail: 週次AI分析の詳細化

### 低優先度（MVP完成後に対応）
- 共通-通知: 通知機能の詳細実装

---

**最終更新:** 2025年10月4日 16:00
**更新者:** Claude Code

**注:** このバックログはPhase 0-5の基本実装完了後に順次対応します。エラーなく稼働することを最優先し、初期実装では省略します。
