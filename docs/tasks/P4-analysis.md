# Phase 4: 指導者分析機能

**期間:** 2週間
**進捗:** 0% (0/10タスク完了)
**状態:** ⏳ 未着手

---

## 概要

週次AI分析による高度な学習支援 (将来価値)

**成果物:**
- 生徒一覧機能
- 週次AI分析
- バッチ処理基盤

---

## タスク一覧

### P4-1: 生徒一覧機能実装 ⏳ 未着手

- [ ] `/app/coach/students/page.tsx` 実装
  - 対応要件: `05-Requirements-Coach.md` - 生徒一覧
  - 検証: 担当生徒一覧表示、検索・フィルター機能

- [ ] 生徒検索・フィルター実装
  - 対応要件: `05-Requirements-Coach.md`
  - 検証: 名前検索、学年・コースフィルター、ソート機能

- [ ] 生徒詳細画面実装
  - 対応要件: `05-Requirements-Coach.md`
  - 検証: `/app/coach/student/[id]/page.tsx` 学習状況サマリー表示

---

### P4-2: 週次AI分析実装 ⏳ 未着手

- [ ] 週次分析データ取得ロジック実装
  - 対応要件: `05-Requirements-Coach.md` - 週次分析
  - 検証: 過去4週間の学習ログ集計、科目別正答率計算

- [ ] AI分析プロンプト設計
  - 対応要件: `05-Requirements-Coach.md`
  - 検証: 強み・課題・具体的アドバイス生成、指導者向けトーン

- [ ] 分析結果表示UI実装
  - 対応要件: `05-Requirements-Coach.md`
  - 検証: カード形式、科目別タブ、印刷機能

- [ ] 分析履歴保存機能実装
  - 対応要件: `05-Requirements-Coach.md`
  - 検証: `weekly_analysis` テーブルへ保存、過去分析閲覧

---

### P4-3: バッチ処理基盤実装 ⏳ 未着手

- [ ] 週次バッチ処理実装 (Vercel Cron)
  - 対応要件: 運用要件
  - 検証: 毎週月曜0時に自動実行、全生徒分析生成

- [ ] バッチエラーハンドリング実装
  - 対応要件: 運用要件
  - 検証: 失敗時リトライ、Sentry通知

---

### P4-4: Phase 4 総合テスト ⏳ 未着手

- [ ] 生徒一覧・詳細E2Eテスト
  - 対応要件: `05-Requirements-Coach.md`
  - 検証: 検索・フィルター動作、詳細画面表示

- [ ] 週次分析E2Eテスト
  - 対応要件: `05-Requirements-Coach.md`
  - 検証: データ取得 → AI分析 → 結果表示 → 保存

- [ ] バッチ処理動作確認
  - 対応要件: 運用要件
  - 検証: 手動実行・自動実行成功、エラー通知

---

## DoD (Definition of Done)

Phase 4完了の条件:

- [ ] 指導者が担当生徒一覧を閲覧・検索できる
- [ ] 指導者が各生徒の週次AI分析を閲覧できる
- [ ] AI分析が強み・課題・具体的アドバイスを生成できる
- [ ] 週次バッチ処理で自動的に全生徒の分析が生成される
- [ ] 分析履歴が保存され、過去分析を閲覧できる

---

## リスク要因

| リスク | 発生確率 | 影響度 | 対策 | 状態 |
|--------|---------|--------|------|------|
| バッチ処理のタイムアウト | 中 | 高 | 並列処理、チャンク分割 | ⏳ 未対応 |
| AI分析の品質 | 中 | 中 | プロンプトチューニング、指導者フィードバック | ⏳ 未対応 |
| コスト超過 (OpenAI API) | 低 | 中 | 使用量監視、上限設定 | ⏳ 未対応 |

---

## 次のマイルストーン

**現在:** ⏳ Phase 3完了待ち
**次:** P4-1 生徒一覧機能実装開始

---

**最終更新:** 2025年10月4日 15:50
**更新者:** Claude Code
